<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cathedral Hub Shell — Trinity Console</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <meta name="color-scheme" content="dark light">
  <link rel="stylesheet" href="./tokens.css">
  <link rel="stylesheet" href="./primitives.css">
</head>
<body data-motion="still" data-gate-state="active">
  <div class="ui-shell" role="application" aria-label="Cathedral hub two-panel console">
    <aside class="panel panel--nav" aria-label="Trinity navigation">
      <header>
        <h1>Trinity Routing</h1>
        <p>Ledger-aligned overview for cathedral-core (Mind), cathedral-scenes (Body), and cathedral-hub (Soul/Bridge).</p>
      </header>
      <nav>
        <ul class="nav-list">
          <li class="nav-item"><a class="nav-link" href="../../core" aria-label="Visit cathedral-core dossier">cathedral-core → rites &amp; data spine</a></li>
          <li class="nav-item"><a class="nav-link" href="../../cathedral.html" aria-label="Visit cathedral scenes">cathedral-scenes → experiential vault</a></li>
          <li class="nav-item"><a class="nav-link" href="../../helix-renderer/index.html" aria-label="Open cosmic helix renderer">cathedral-hub → helix renderer</a></li>
          <li class="nav-item"><a class="nav-link" href="../../README_RENDERER.md" aria-label="Read helix renderer manual">renderer manual → recovery notes</a></li>
        </ul>
      </nav>
      <section class="section" aria-labelledby="canon-title">
        <h2 id="canon-title" class="section__title">Canon Anchors</h2>
        <p class="section__content">Codex 144:99 spine, Bones/Blood/Nerves fusion, 21 pillars, and Witch Eye rite remain verbatim. This shell keeps all links offline-first.</p>
      </section>
    </aside>

    <main class="panel" aria-live="polite">
      <section class="motion-gate" aria-labelledby="gate-title" aria-describedby="gate-copy">
        <h2 id="gate-title" class="motion-gate__title">Motion Gate</h2>
        <p id="gate-copy">All panels load in stillness. Press the acknowledgement to confirm reduced-motion mode; transitions remain effectively zero-duration.</p>
        <div class="motion-gate__actions">
          <button class="button" type="button" id="gate-acknowledge">Acknowledge calm mode</button>
          <button class="button motion-enabled" type="button" id="gate-motion" disabled>Enable motion (disabled)</button>
        </div>
      </section>

      <section class="section" aria-labelledby="layer-title">
        <h2 id="layer-title" class="section__title">Layered Cosmology</h2>
        <p class="section__content">Open the <strong>Cosmic Helix Renderer</strong> to see Vesica grid, Tree-of-Life scaffold, Fibonacci spiral, and the static double-helix lattice, all parameterized by 3, 7, 9, 11, 22, 33, 99, and 144.</p>
        <p class="section__content">Double-click <code>helix-renderer/index.html</code> offline. Palette files are optional; missing data triggers the built-in safe notice.</p>
      </section>

      <section class="section" aria-labelledby="bus-title">
        <h2 id="bus-title" class="section__title">Client ↔ WS Bridge</h2>
        <p class="section__content">Use the lightweight event bus to route rituals between panels. Default endpoint honors the Trinity routing via <code>wss://cathedral-core.fly.dev/ws</code>.</p>
        <pre class="code-snippet" aria-label="Example TypeScript usage"><code>import { EventBus } from "../../libs/event-bus.js"; // transpile TS → JS offline

const bus = new EventBus();
bus.on("recovery:update", payload => {
  console.log("Recovery summary", payload);
});

bus.emit("helix:focus", { pillar: 21 });</code></pre>
      </section>

      <section class="section" aria-labelledby="recovery-title">
        <h2 id="recovery-title" class="section__title">Recovery Summary</h2>
        <p class="section__content">Track the 33-spine / 21-pillar fusion state and public-purity filter here. Ledger-only interactions keep data sovereign; no external requests fire from this shell.</p>
      </section>
    </main>
  </div>

  <script type="module">
    const root = document.body;
    const acknowledgeButton = document.getElementById("gate-acknowledge");
    const motionButton = document.getElementById("gate-motion");

    function dismissGate() {
      root.setAttribute("data-gate-state", "dismissed");
    }

    function lockMotion() {
      root.setAttribute("data-motion", "still");
      if (motionButton) {
        motionButton.setAttribute("aria-disabled", "true");
      }
    }

    if (acknowledgeButton) {
      acknowledgeButton.addEventListener("click", () => {
        dismissGate();
        lockMotion();
      });
    }

    lockMotion();
  </script>
</body>
</html>
