<title>Chapel Test -- C99</title>
<link rel="stylesheet" href="/assets/css/perm-style.css" />
<script type="module" src="/bridge/c99-bridge.js"></script>
<style>
  .frame{max-width:960px;margin:5rem auto;padding:2rem;border:var(--line-primary) solid var(--gold)}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1rem}
  .card{padding:1rem;background:rgba(20,20,26,.5);border:1px solid var(--indigo)}
  .card img{width:100%;height:auto;display:block}
</style>
</head><body>
<div class="frame">
  <h1>Portal Gallery (ND-safe)</h1>
  <div class="grid" id="gallery"></div>
</div>
<script>
document.addEventListener('DOMContentLoaded', async () => {
  C99Bridge.ndSafe();
  const tokens = await C99Bridge.loadTokens('/assets/tokens/perm-style.json');
  C99Bridge.applyCSSVars(tokens);
  const m = await C99Bridge.loadManifest('/bridge/c99-bridge.json');
  const g = document.getElementById('gallery');
  m.assets.slice(0,24).forEach(a=>{
    const el = document.createElement('div'); el.className='card';
    const img = document.createElement('img');
    img.src = (a.webp && a.webp.endsWith('.webp')) ? '/'+a.webp : '/'+a.processed;
    img.alt = a.name; g.appendChild(el); el.appendChild(img);
  });
});
</script>
</body></html>
