{
  "$schema":"https://json-schema.org/draft/2020-12/schema",
  "title":"Cathedral Interface Schema",
  "type":"object",
  "required":["version","palettes","geometry_layers","narrative_nodes"],
  "properties":{
    "version":{"type":"string","pattern":"^\\d+\\.\\d+\\.\\d+$"},
    "palettes":{
      "type":"array",
      "items":{
        "type":"object",
        "required":["id","name","swatches","provenance"],
        "properties":{
          "id":{"type":"string"},
          "name":{"type":"string"},
          "swatches":{"type":"array","items":{"type":"string","pattern":"^#?[0-9A-Fa-f]{6,8}$"}},
          "provenance":{"type":"string"}
        }
      }
    },
    "geometry_layers":{
      "type":"array",
      "items":{
        "type":"object",
        "required":["id","kind","data_ref","immutable"],
        "properties":{
          "id":{"type":"string"},
          "kind":{"type":"string","enum":["mesh","field","path","sdf","shader-param"]},
          "data_ref":{"type":"string"},
          "immutable":{"type":"boolean"},
          "notes":{"type":"string"}
        }
      }
    },
    "narrative_nodes":{
      "type":"array",
      "items":{
        "type":"object",
        "required":["node_id","name","locked","egregore_id"],
        "properties":{
          "node_id":{"type":"integer"},
          "name":{"type":"string"},
          "locked":{"type":"boolean"},
          "egregore_id":{"type":"string"},
          "shem_angel":{"type":"string"},
          "goetic_demon":{"type":"string"},
          "gods":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"culture":{"type":"string"}}}},
          "goddesses":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"culture":{"type":"string"}}}},
          "chakra":{"type":"string"},
          "planet":{"type":"string"},
          "zodiac":{"type":"string"},
          "element":{"type":"string"},
          "platonic_solid":{"type":"string"},
          "geometry":{"type":"string"},
          "art_style":{"type":"string"},
          "function":{"type":"string"},
          "ritual_use":{"type":"string"},
          "fusion_tags":{"type":"array","items":{"type":"string"}},
          "links":{"type":"array","items":{"type":"string"}}
        }
      }
    }
  }
}
